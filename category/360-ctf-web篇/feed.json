{
    "version": "https://jsonfeed.org/version/1",
    "title": "Harold • All posts by \"360-ctf-web篇\" category",
    "description": "我踏清风寻杨柳，谁有龙虾谁有酒。清风深知杨柳意，啤酒龙虾又相聚。",
    "home_page_url": "https://harold_popo.gitee.io",
    "items": [
        {
            "id": "https://harold_popo.gitee.io/360-SecLab/CTF-Web/web-03/",
            "url": "https://harold_popo.gitee.io/360-SecLab/CTF-Web/web-03/",
            "title": "CTF-Web-03",
            "date_published": "2021-04-15T08:28:53.000Z",
            "content_html": "<div class=\"note info\">\n<p>360CTF 实训平台：<span class=\"exturl\" data-url=\"aHR0cDovLzE3Mi4xOC4yNS41NQ==\">http://172.18.25.55</span></p>\n<p>仅限内网访问</p>\n</div>\n<h1 id=\"360-seclab-web-03\"><a class=\"anchor\" href=\"#360-seclab-web-03\">#</a> 360-SecLab-Web-03</h1>\n<h2 id=\"捡到银行卡\"><a class=\"anchor\" href=\"#捡到银行卡\">#</a> 捡到银行卡</h2>\n<h3 id=\"题目描述\"><a class=\"anchor\" href=\"#题目描述\">#</a> 题目描述</h3>\n<p>使用 burp 爆破密码</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4zLzIyLw==\">http://10.2.0.3/22/</span></p>\n<h3 id=\"write-up\"><a class=\"anchor\" href=\"#write-up\">#</a> Write-up</h3>\n<p>密码是银行卡密码，那么密码就是 6 位纯数字的密码，我们用 Burpsuite 爆破一下</p>\n<ol>\n<li>\n<p>先设置代理为 <code>127.0.0.1:8080</code> ，这里以 Firefox 浏览器为例</p>\n<p><img data-src=\"https://i.vgy.me/u8Z4xx.png\" alt=\"127.0.0.1:8080\" /></p>\n</li>\n<li>\n<p>启动 Burpsuite，在网页先随便输入一个密码，点确定提交，Burpsuite 抓到数据，在 <code>Proxy</code>  下显示抓包信息</p>\n<p><img data-src=\"https://i.vgy.me/DzbYmd.png\" alt=\"test\" /></p>\n</li>\n<li>\n<p>可以看到输入的密码为 6 个 1，点击 <code>Action</code> --&gt; <code>Send Intruder</code></p>\n<p><img data-src=\"https://i.vgy.me/EZH6Me.png\" alt=\"Send Intruder\" /></p>\n</li>\n<li>\n<p><code>Intruder</code>  下的 <code>Target</code>  是攻击目标， <code>Positions</code>  是攻击方式，这里默认就好，选中 <code>Submit=</code>  后一对 <code>§</code>  括起来的字符串，点击右侧的 <code>Clear§</code>  按钮</p>\n<p><img data-src=\"https://i.vgy.me/fWaZy6.png\" alt=\"Intruder_Positions\" /></p>\n</li>\n<li>\n<p>只留下一个 <code>password=</code>  后面带有 <code>§</code>  标记的，这个标记括起来的当作变量一会进行爆破</p>\n<p><img data-src=\"https://i.vgy.me/5YbdRM.png\" alt=\"Clear§\" /></p>\n</li>\n<li>\n<p>切换到 <code>Payloads</code> ，修改密码参数，密码 6 位建议从中间 500000 开始</p>\n<p><img data-src=\"https://i.vgy.me/mNnOVq.png\" alt=\"set_payloads\" /></p>\n</li>\n<li>\n<p>切换到 <code>Options</code> ，可以修改线程数，默认是 5 线程，我这里设置 20 线程，线程设置当然不是说越多越好，经过测试我的电脑 20 线程是最佳，然后点击 <code>Start attack</code>  开始爆破</p>\n<p><img data-src=\"https://i.vgy.me/tr1oXL.png\" alt=\"payload_threads\" /></p>\n</li>\n<li>\n<p>看返回的 <code>Length</code>  不一样的，最大的那个就是密码</p>\n<p><img data-src=\"https://i.vgy.me/nOvk0K.png\" alt=\"passwd_result\" /></p>\n</li>\n<li>\n<p>关闭 Burpsuite 或者代理，输入爆破出来的密码，得到 flag</p>\n</li>\n</ol>\n<p><img data-src=\"https://i.vgy.me/KAMDcY.png\" alt=\"result\" /></p>\n<h2 id=\"找找看看\"><a class=\"anchor\" href=\"#找找看看\">#</a> 找找看看</h2>\n<h3 id=\"题目描述-2\"><a class=\"anchor\" href=\"#题目描述-2\">#</a> 题目描述</h3>\n<p>看 url，先下载图片 winhex 打开 url 解密得到，在源码中还有 url 解密，可以看到是百度网盘的分享码，得到 flag</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4zLzIzLw==\">http://10.2.0.3/23/</span></p>\n<h3 id=\"write-up-2\"><a class=\"anchor\" href=\"#write-up-2\">#</a> Write-up</h3>\n<ol>\n<li>\n<p>根据提示先下载图片用 winhex 打开，寻找类似 url 编码的东西，拉到最底</p>\n<p><img data-src=\"https://i.vgy.me/SkBbuy.png\" alt=\"found_urlencode\" /></p>\n</li>\n<li>\n<p>复制下来去 url 解码，得到一个百度网盘链接，再看提示，源码里也有 url 解密，得到网盘分享密码</p>\n<p><img data-src=\"https://i.vgy.me/I7vvT5.png\" alt=\"passwd_urldecode\" /></p>\n</li>\n<li>\n<p>输入密码打开网盘分享链接，得到 flag 文件，下载下来即拿到 flag</p>\n<p><img data-src=\"https://i.vgy.me/Nzna45.png\" alt=\"result\" /></p>\n</li>\n</ol>\n<h2 id=\"只能上传图片\"><a class=\"anchor\" href=\"#只能上传图片\">#</a> 只能上传图片</h2>\n<h3 id=\"题目描述-3\"><a class=\"anchor\" href=\"#题目描述-3\">#</a> 题目描述</h3>\n<p>php 进行上传限制，绕过黑名单</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4zLzI0Lw==\">http://10.2.0.3/24/</span></p>\n<h3 id=\"write-up-3\"><a class=\"anchor\" href=\"#write-up-3\">#</a> Write-up</h3>\n<ol>\n<li>\n<p>先随便上传一个 php 文件试试</p>\n<p><img data-src=\"https://i.vgy.me/HiGmUl.png\" alt=\"test\" /></p>\n</li>\n<li>\n<p>弹出提示，显示的文件后缀的文件都不能上传</p>\n<p><img data-src=\"https://i.vgy.me/tV7aUI.png\" alt=\"warn_tip\" /></p>\n</li>\n<li>\n<p>把 PHP 文件的后缀改成 <code>.pHp</code> ，再上传试试？</p>\n<p><img data-src=\"https://i.vgy.me/T0qYNu.png\" alt=\"result\" /></p>\n<p>黑名单限制文件后缀的大小写不敏感，成功拿到 flag</p>\n</li>\n</ol>\n",
            "tags": [
                "CTF"
            ]
        },
        {
            "id": "https://harold_popo.gitee.io/360-SecLab/CTF-Web/web-02/",
            "url": "https://harold_popo.gitee.io/360-SecLab/CTF-Web/web-02/",
            "title": "CTF-Web-02",
            "date_published": "2021-04-13T13:45:54.000Z",
            "content_html": "<div class=\"note info\">\n<p>360CTF 实训平台：<span class=\"exturl\" data-url=\"aHR0cDovLzE3Mi4xOC4yNS41NQ==\">http://172.18.25.55</span></p>\n<p>仅限内网访问</p>\n</div>\n<h1 id=\"360-seclab-web-02\"><a class=\"anchor\" href=\"#360-seclab-web-02\">#</a> 360-SecLab-Web-02</h1>\n<h2 id=\"文件上传\"><a class=\"anchor\" href=\"#文件上传\">#</a> 文件上传</h2>\n<h3 id=\"题目描述\"><a class=\"anchor\" href=\"#题目描述\">#</a> 题目描述</h3>\n<p>web 代码修改上传验证</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4xOC8xNy8=\">http://10.2.0.18/17/</span></p>\n<h3 id=\"write-up\"><a class=\"anchor\" href=\"#write-up\">#</a> Write-up</h3>\n<p>提示是 web 代码修改上传验证，题目应该是浏览器端的上传检测漏洞，先右键查看源码</p>\n<ol>\n<li>\n<p>发现提交表单数据时有一个检测函数</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token keyword\">function</span> <span class=\"token function\">check</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"file1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"file1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">lastIndexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"file1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">case</span><span class=\"token string\">\"jpg\"</span><span class=\"token operator\">:</span><span class=\"token keyword\">case</span><span class=\"token string\">\"gif\"</span><span class=\"token operator\">:</span><span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">default</span><span class=\"token operator\">:</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"文件格式不支持！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><p>上传检测方案是在客户端使用 js 对不合法图片进行检查，很容易在前端对 js 脚本操作使其无效从而绕过</p>\n</li>\n<li>\n<p>此为浏览器端的上传检测漏洞，在上传前把过滤函数 <code>check()</code>  删除即可实现检测绕过，直接把 <code>return check()</code>  删除就行</p>\n<p><img data-src=\"https://i.vgy.me/UT4Em3.png\" alt=\"code\" /></p>\n</li>\n<li>\n<p>然后随便上传一个 php 文件，上传成功即出现 key</p>\n<p><img data-src=\"https://i.vgy.me/t9wvNz.png\" alt=\"result\" /></p>\n</li>\n</ol>\n<h2 id=\"css-or-xss\"><a class=\"anchor\" href=\"#css-or-xss\">#</a> CSS OR XSS</h2>\n<h3 id=\"题目描述-2\"><a class=\"anchor\" href=\"#题目描述-2\">#</a> 题目描述</h3>\n<p>源代码查看 xss 文件内容解析</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4zLzE5Lw==\">http://10.2.0.3/19/</span></p>\n<h3 id=\"write-up-2\"><a class=\"anchor\" href=\"#write-up-2\">#</a> Write-up</h3>\n<p>题目提示是查看 xss 文件，又有 css，那就找一下 css 样式表看看</p>\n<p><img data-src=\"https://i.vgy.me/m6aSQc.png\" alt=\"css\" /></p>\n<h2 id=\"你抓住了吗\"><a class=\"anchor\" href=\"#你抓住了吗\">#</a> 你抓住了吗？</h2>\n<h3 id=\"题目描述-3\"><a class=\"anchor\" href=\"#题目描述-3\">#</a> 题目描述</h3>\n<p>浏览器默认开启 JavaScript 挡住了 flag</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4zLzIx\">http://10.2.0.3/21</span></p>\n<h3 id=\"write-up-3\"><a class=\"anchor\" href=\"#write-up-3\">#</a> Write-up</h3>\n<p>根据提示关闭浏览器默认开启的 JavaScript 即可，但是好像又行不通了？？？</p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> 暂未复现</label></li>\n</ul>\n",
            "tags": [
                "CTF"
            ]
        },
        {
            "id": "https://harold_popo.gitee.io/360-SecLab/CTF-Web/web-01/",
            "url": "https://harold_popo.gitee.io/360-SecLab/CTF-Web/web-01/",
            "title": "CTF-Web-01",
            "date_published": "2021-04-12T13:45:37.000Z",
            "content_html": "<div class=\"note info\">\n<p>360CTF 实训平台：<span class=\"exturl\" data-url=\"aHR0cDovLzE3Mi4xOC4yNS41NQ==\">http://172.18.25.55</span></p>\n<p>仅限内网访问</p>\n</div>\n<h1 id=\"360-seclab-web-01\"><a class=\"anchor\" href=\"#360-seclab-web-01\">#</a> 360-SecLab-Web-01</h1>\n<h2 id=\"菜刀的相册\"><a class=\"anchor\" href=\"#菜刀的相册\">#</a> 菜刀的相册</h2>\n<h3 id=\"题目描述\"><a class=\"anchor\" href=\"#题目描述\">#</a> 题目描述</h3>\n<p>进入题目页面，发现与上面 MySQL 一样，同样是通过 $_GET [id] 传参</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4xOC83Lw==\">http://10.2.0.18/7/</span></p>\n<h3 id=\"write-up\"><a class=\"anchor\" href=\"#write-up\">#</a> Write-up</h3>\n<p class=\"primary\"></p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> 未完成</label></li>\n</ul>\n<p>MySQL 注入，暂时没有成功，各位可以自行尝试一下</p>\n<h2 id=\"这是黑阔们经常干的事\"><a class=\"anchor\" href=\"#这是黑阔们经常干的事\">#</a> 这是黑阔们经常干的事</h2>\n<h3 id=\"题目描述-2\"><a class=\"anchor\" href=\"#题目描述-2\">#</a> 题目描述</h3>\n<p>本题考察的是 windows 下 cmd 相关命令的使用。</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4xOC84L2luZGV4LmFzcA==\">http://10.2.0.18/8/index.asp</span></p>\n<h3 id=\"write-up-2\"><a class=\"anchor\" href=\"#write-up-2\">#</a> Write-up</h3>\n<p>这是菜刀大牛的服务器的 cmdshell，而且还是 system 权限，不信你可以输入 whoami 试试</p>\n<p>据调查，他服务器的系统是 Windows 系统，请你添加一个管理员用户！</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 添加管理员账户 lalala，密码 123456</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>net user lalala <span class=\"token number\">123456</span> /add</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 将用户 lalala 提升为管理员用户</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>net localgroup administrators lalala /add</pre></td></tr></table></figure><p>用刚创建的账号密码<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4xOC84L2NoZWNrLmFzcA==\">登录 http://10.2.0.18/8/check.asp</span>，获取 key</p>\n<h2 id=\"老规矩你懂的\"><a class=\"anchor\" href=\"#老规矩你懂的\">#</a> 老规矩，你懂的</h2>\n<h3 id=\"题目描述-3\"><a class=\"anchor\" href=\"#题目描述-3\">#</a> 题目描述</h3>\n<p>简单的 web 代码隐藏 key 的题目。</p>\n<p>题目网址：<span class=\"exturl\" data-url=\"aHR0cDovLzEwLjIuMC4zLzE0Lw==\">http://10.2.0.3/14/</span></p>\n<h3 id=\"write-up-3\"><a class=\"anchor\" href=\"#write-up-3\">#</a> Write-up</h3>\n<p>浏览器打开题目地址，按 F12 查看源码，这不就是吗。。。</p>\n<p><img data-src=\"https://i.vgy.me/18H3CR.png\" alt=\"key\" /></p>\n",
            "tags": [
                "CTF"
            ]
        }
    ]
}